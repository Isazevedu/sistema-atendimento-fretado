<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Sistema de Atendimento - Final</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://unpkg.com/lucide@latest"></script>

  <style>
    :root {
      --bg: #f8fafc; --card-bg: #ffffff; --border: #e2e8f0;
      --text-main: #1e293b; --text-muted: #64748b;
      --primary-blue: #2563eb; --success-green: #22c55e; --danger-red: #ef4444;
      --color-cartao: #2563eb; --color-linha: #16a34a;
      --color-endereco: #7c3aed; --color-reclamacao: #dc2626;
    }

    * { box-sizing: border-box; font-family: 'Segoe UI', system-ui, sans-serif; }
    body { background-color: var(--bg); margin: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; gap: 20px; }

    .card { background: var(--card-bg); width: 100%; max-width: 850px; border-radius: 8px; border: 1px solid var(--border); box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05); padding: 24px; }
    .header-title { color: var(--primary-blue); font-size: 24px; font-weight: 700; margin: 0; }
    
    .menu-list { display: flex; flex-direction: column; gap: 12px; margin-top: 20px; }
    .menu-button { background: white; border: 1px solid var(--border); border-radius: 8px; padding: 18px; display: flex; flex-direction: column; align-items: center; cursor: pointer; transition: 0.2s; gap: 8px; }
    .menu-button span { font-size: 14px; font-weight: 600; color: var(--text-main); }
    
    .icon-cartao { color: var(--color-cartao); }
    .icon-linha { color: var(--color-linha); }
    .icon-endereco { color: var(--color-endereco); }
    .icon-reclamacao { color: var(--color-reclamacao); }

    .menu-button.active.blue { border: 2.5px solid var(--color-cartao); background: #eff6ff; }
    .menu-button.active.green { border: 2.5px solid var(--color-linha); background: #f0fdf4; }
    .menu-button.active.purple { border: 2.5px solid var(--color-endereco); background: #faf5ff; }
    .menu-button.active.red { border: 2.5px solid var(--color-reclamacao); background: #fef2f2; }

    .form-section { display: none; margin-top: 20px; border-top: 1px solid var(--border); padding-top: 24px; }
    .form-header { display: flex; align-items: center; gap: 10px; font-size: 18px; font-weight: 700; margin-bottom: 20px; }
    
    .input-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
    .full-width { grid-column: span 2; }

    .input-group { margin-bottom: 15px; }
    .input-group label { display: block; font-size: 13px; font-weight: 600; margin-bottom: 6px; }
    .required { color: var(--danger-red); margin-left: 2px; }
    
    input, select, textarea { width: 100%; padding: 12px; border: 1px solid var(--border); border-radius: 6px; font-size: 14px; background: #fcfcfc; }
    textarea { min-height: 100px; resize: vertical; }

    .radio-group { display: flex; flex-direction: column; gap: 8px; margin-top: 8px; }
    .radio-item { display: flex; align-items: center; gap: 8px; font-size: 14px; cursor: pointer; }
    .radio-item input { width: auto; }

    .save-btn { width: 100%; background: linear-gradient(to bottom, #3b82f6, #2563eb); color: white; border: none; padding: 16px; border-radius: 8px; font-weight: 700; cursor: pointer; margin-top: 20px; }

    .record-card { border: 1px solid var(--border); border-radius: 8px; padding: 16px; margin-top: 12px; position: relative; text-align: left; background: #fff; }
    .record-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px; border-bottom: 1px solid #f1f5f9; padding-bottom: 8px; }
    .delete-btn { color: var(--danger-red); cursor: pointer; border: none; background: none; }
  </style>
</head>
<body>

  <div class="card">
    <h1 class="header-title">Sistema de Atendimento</h1>
    <p style="color:var(--text-muted); margin:0; font-size:14px;">Transporte Fretado • Registro de Atendimentos</p>

    <div class="menu-list">
      <div class="menu-button blue" onclick="showForm('cartao', this)">
        <i data-lucide="credit-card" class="icon-cartao"></i><span>Troca de Cartão</span>
      </div>
      <div class="menu-button green" onclick="showForm('linha', this)">
        <i data-lucide="repeat" class="icon-linha"></i><span>Mudança de Linha</span>
      </div>
      <div class="menu-button purple" onclick="showForm('endereco', this)">
        <i data-lucide="home" class="icon-endereco"></i><span>Mudança de Endereço</span>
      </div>
      <div class="menu-button red" onclick="showForm('reclamacao', this)">
        <i data-lucide="alert-circle" class="icon-reclamacao"></i><span>Reclamações</span>
      </div>
    </div>

    <div id="form-container" class="form-section">
      <div class="form-header" id="dynamic-title"></div>
      <div id="fields-area"></div>
      <button class="save-btn" onclick="saveData()">Salvar Registro</button>
    </div>
  </div>

  <div class="card">
    <div style="display:flex; justify-content:space-between; align-items:center;">
      <h3 style="margin:0;"><i data-lucide="file-text"></i> Registros Salvos (<span id="count">0</span>)</h3>
    </div>
    <div id="records-list" style="margin-top:20px; text-align:center; color:var(--text-muted);">Nenhum registro salvo ainda.</div>
  </div>

  <script>
    let currentType = '';
    let savedRecords = [];
    lucide.createIcons();

    function showForm(type, el) {
      currentType = type;
      const container = document.getElementById('form-container');
      const titleArea = document.getElementById('dynamic-title');
      const fieldsArea = document.getElementById('fields-area');
      
      document.querySelectorAll('.menu-button').forEach(btn => btn.classList.remove('active'));
      el.classList.add('active');

      if(type === 'cartao') {
        titleArea.innerHTML = `<i data-lucide="credit-card" class="icon-cartao"></i> Troca de Cartão`;
        fieldsArea.innerHTML = `
          <div class="input-grid">
            <div class="input-group"><label>Work Day<span class="required">*</span></label><input type="text" id="wd"></div>
            <div class="input-group"><label>Data<span class="required">*</span></label><input type="date" id="date" value="2025-12-23"></div>
            <div class="input-group"><label>Número do Cartão Novo<span class="required">*</span></label><input type="text" id="c_novo"></div>
            <div class="input-group"><label>RFID Novo<span class="required">*</span></label><input type="text" id="rfid_n"></div>
            <div class="input-group"><label>Cartão Anterior</label><input type="text" id="c_ant"></div>
            <div class="input-group"><label>RFID Anterior</label><input type="text" id="rfid_a"></div>
            <div class="input-group full-width"><label>Motivo da troca<span class="required">*</span></label>
              <select id="motivo_c">
                <option value="">Selecione...</option><option>Cartão quebrado</option><option>Cartão perdido</option>
                <option>Cartão roubado</option><option>Mau funcionamento</option><option>Outros</option>
              </select>
            </div>
          </div>`;
      } else if(type === 'linha') {
        titleArea.innerHTML = `<i data-lucide="repeat" class="icon-linha"></i> Mudança de Linha`;
        fieldsArea.innerHTML = `
          <div class="input-grid">
            <div class="input-group"><label>Work Day<span class="required">*</span></label><input type="text" id="wd"></div>
            <div class="input-group"><label>Data<span class="required">*</span></label><input type="date" id="date" value="2025-12-23"></div>
            <div class="input-group"><label>Linha Atual<span class="required">*</span></label><input type="text" id="l_atual"></div>
            <div class="input-group"><label>Linha Nova<span class="required">*</span></label><input type="text" id="l_nova"></div>
            <div class="input-group full-width"><label>Motivo da Mudança<span class="required">*</span></label>
              <select id="motivo_l">
                <option value="">Selecione...</option><option>Solicitado por e-mail</option>
                <option>Solicitado pelo colaborador</option><option>Mudança de endereço</option><option>Horário incompatível</option>
              </select>
            </div>
            <div class="input-group full-width">
              <label>O endereço permanece o mesmo?<span class="required">*</span></label>
              <div class="radio-group">
                <label class="radio-item"><input type="radio" name="same_end" value="Sim" checked> Sim, mesmo endereço</label>
                <label class="radio-item"><input type="radio" name="same_end" value="Não"> Não, endereço mudou</label>
              </div>
            </div>
            <div class="input-group full-width"><label>Endereço Atual (opcional)</label><input type="text" id="end_ref"></div>
          </div>`;
      } else if(type === 'endereco') {
        titleArea.innerHTML = `<i data-lucide="home" class="icon-endereco"></i> Mudança de Endereço`;
        fieldsArea.innerHTML = `
          <div class="input-grid">
            <div class="input-group"><label>Work Day<span class="required">*</span></label><input type="text" id="wd"></div>
            <div class="input-group"><label>Data<span class="required">*</span></label><input type="date" id="date" value="2025-12-23"></div>
            <div class="input-group full-width"><label>Linha Atual<span class="required">*</span></label><input type="text" id="l_atual_e"></div>
            <div class="input-group full-width"><label>Endereço Anterior<span class="required">*</span></label><input type="text" id="e_ant"></div>
            <div class="input-group full-width"><label>Endereço Novo<span class="required">*</span></label><input type="text" id="e_nov"></div>
            <div class="input-group full-width">
              <label>Houve mudança de linha?<span class="required">*</span></label>
              <div class="radio-group">
                <label class="radio-item"><input type="radio" name="m_linha" value="Não" checked> Não, permanece na mesma linha</label>
                <label class="radio-item"><input type="radio" name="m_linha" value="Sim"> Sim, mudou de linha</label>
              </div>
            </div>
            <div class="input-group full-width"><label>Observações (opcional)</label><textarea id="obs_e"></textarea></div>
          </div>`;
      } else if(type === 'reclamacao') {
        titleArea.innerHTML = `<i data-lucide="alert-circle" class="icon-reclamacao"></i> Reclamações`;
        fieldsArea.innerHTML = `
          <div class="input-grid">
            <div class="input-group"><label>Work Day<span class="required">*</span></label><input type="text" id="wd"></div>
            <div class="input-group"><label>Data<span class="required">*</span></label><input type="date" id="date" value="2025-12-23"></div>
            <div class="input-group full-width"><label>Linha<span class="required">*</span></label><input type="text" id="l_rec"></div>
            <div class="input-group full-width"><label>Endereço (opcional)</label><input type="text" id="e_rec"></div>
            <div class="input-group full-width"><label>Tipo de Reclamação<span class="required">*</span></label>
              <select id="t_rec">
                <option value="">Selecione...</option><option>Atraso</option><option>Conduta do motorista</option>
                <option>Veículo em más condições</option><option>Não parou no ponto</option>
              </select>
            </div>
            <div class="input-group full-width"><label>Descrição Detalhada<span class="required">*</span></label><textarea id="desc_rec"></textarea></div>
          </div>`;
      }
      container.style.display = 'block';
      lucide.createIcons();
    }

    function saveData() {
      const wdInput = document.getElementById('wd');
      const dateInput = document.getElementById('date');
      
      if(!wdInput || !wdInput.value) return alert("Work Day obrigatório");

      const wd = wdInput.value;
      const date = dateInput.value.split('-').reverse().join('/');
      
      let info = `<strong>WD:</strong> ${wd} | `;
      let label = "";

      if(currentType === 'cartao') {
        label = "TROCA DE CARTÃO";
        info += `<strong>Novo:</strong> ${document.getElementById('c_novo').value} | <strong>Motivo:</strong> ${document.getElementById('motivo_c').value}`;
      } else if(currentType === 'linha') {
        label = "MUDANÇA DE LINHA";
        info += `<strong>Nova:</strong> ${document.getElementById('l_nova').value} | <strong>Mesmo End:</strong> ${document.querySelector('input[name="same_end"]:checked').value}`;
      } else if(currentType === 'endereco') {
        label = "MUDANÇA DE ENDEREÇO";
        info += `<strong>Novo End:</strong> ${document.getElementById('e_nov').value}`;
      } else if(currentType === 'reclamacao') {
        label = "RECLAMAÇÃO";
        info += `<strong>Tipo:</strong> ${document.getElementById('t_rec').value}`;
      }

      savedRecords.unshift({ id: Date.now(), label, date, info });
      render();
    }

    function render() {
      const list = document.getElementById('records-list');
      document.getElementById('count').innerText = savedRecords.length;
      if(!savedRecords.length) { list.innerHTML = "Nenhum registro salvo ainda."; return; }
      list.innerHTML = savedRecords.map(r => `
        <div class="record-card">
          <div class="record-header"><span><strong>${r.label}</strong> • ${r.date}</span><button class="delete-btn" onclick="del(${r.id})"><i data-lucide="trash-2" size="18"></i></button></div>
          <div style="font-size:13px;">${r.info}</div>
        </div>`).join('');
      lucide.createIcons();
    }

    function del(id) { savedRecords = savedRecords.filter(r => r.id !== id); render(); }
  </script>
</body>
</html>
